import{u as m,r as a}from"./index-BG5pTNHe.js";const y=(o,n,c)=>{const{currentUser:e,saveCharacter:u,loadUserCharacters:i}=m(),t=a.useCallback(async()=>{if(!(!e||!o.nome))try{await u(o),console.log("Personagem salvo no Firebase")}catch(r){console.error("Erro ao salvar no Firebase:",r)}},[e,o,u]),s=a.useCallback(async()=>{if(e)try{const r=await i();if(r.length>0){const l=r.sort((f,d)=>new Date(d.updatedAt)-new Date(f.updatedAt))[0];n({type:c.LOAD_CHARACTER,payload:l})}}catch(r){console.error("Erro ao carregar do Firebase:",r)}},[e,i,n,c]);return a.useEffect(()=>{if(!e||!o.nome)return;const r=setTimeout(t,2e3);return()=>clearTimeout(r)},[o,t,e]),a.useEffect(()=>{e&&s()},[e,s]),{saveToFirebase:t,loadFromFirebase:s,isLoggedIn:!!e}};export{y as useFirebaseSync};
